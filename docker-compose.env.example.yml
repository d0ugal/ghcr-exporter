version: '3.8'

services:
  ghcr-exporter:
    image: ghcr.io/d0ugal/ghcr-exporter:v2.11.32@sha256:c7431ce46ea00ece377dfe2311b8974754b8b9a3243366904c1efd7a8511b505
    container_name: ghcr-exporter
    ports:
      - "8080:8080"
    environment:
      # GitHub API configuration
      - GITHUB_TOKEN=your_github_token_here

      # Server configuration
      - GHCR_EXPORTER_SERVER_HOST=0.0.0.0
      - GHCR_EXPORTER_SERVER_PORT=8080

      # Logging configuration
      - GHCR_EXPORTER_LOG_LEVEL=info
      - GHCR_EXPORTER_LOG_FORMAT=json

      # Metrics configuration
      - GHCR_EXPORTER_METRICS_DEFAULT_INTERVAL=60s

      # Timezone
      - TZ=UTC
    restart: unless-stopped
    deploy:
      resources:
        limits:
          memory: 256M
        reservations:
          memory: 128M

# Example with minimal configuration:
# services:
#   ghcr-exporter:
#     image: ghcr.io/d0ugal/ghcr-exporter:v2.0.7
#     container_name: ghcr-exporter
#     ports:
#       - "8080:8080"
#     environment:
#       - GITHUB_TOKEN=your_github_token_here
#     restart: unless-stopped
